{"version":3,"file":"song.js","sourceRoot":"","sources":["song.ts"],"names":[],"mappings":"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","sourcesContent":["import {message} from \"../message/messenger\";\nimport {live} from \"../live/live\";\nimport {scene} from \"../scene/scene\";\n\nexport namespace song {\n    import Messenger = message.Messenger;\n    import iLiveApiJs = live.iLiveApiJs;\n    import Scene = scene.Scene;\n\n    export class Song {\n\n        song_dao: iSongDao;\n\n        constructor(song_dao: iSongDao) {\n            this.song_dao = song_dao;\n        }\n\n        get_scene_at_index(index: number) {\n\n        }\n\n        create_scene_at_index(index: number) {\n\n        }\n\n        set_session_record(int) {\n            this.song_dao.set_session_record(int);\n        }\n\n        set_overdub(int) {\n            this.song_dao.set_overdub(int);\n        }\n\n        set_tempo(int) {\n            this.song_dao.set_tempo(int);\n        }\n\n        start() {\n            this.song_dao.start()\n        }\n\n        stop() {\n            this.song_dao.stop()\n        }\n\n        get_scenes(): any[] {\n            return this.song_dao.get_scenes()\n        }\n\n        get_num_scenes(): number {\n            return this.get_scenes().length/2\n        }\n    }\n\n    export interface iSongDao {\n        set_session_record(int: number)\n        set_overdub(int: number)\n        set_tempo(int: number)\n        start(): void\n        stop(): void\n        get_scenes(): any[]\n    }\n\n    export class SongDaoVirtual implements iSongDao {\n\n        scenes: Scene[];\n\n        constructor(scenes: Scene[]) {\n            this.scenes = scenes\n        }\n\n        get_scenes(): string[] {\n            let data: string[] = [];\n            for (let scene of this.scenes) {\n                data.push('id');\n                data.push(scene.get_id());\n            }\n            return data;\n        }\n\n        set_overdub(int: number) {\n            return\n        }\n\n        set_session_record(int: number) {\n            return\n        }\n\n        set_tempo(int: number) {\n            return\n        }\n\n        start(): void {\n            return\n        }\n\n        stop(): void {\n            return\n        }\n    }\n\n    export class SongDao implements iSongDao {\n\n        private clip_live: iLiveApiJs;\n        private messenger: Messenger;\n        private deferlow: boolean;\n\n        constructor(clip_live: iLiveApiJs, messenger, deferlow: boolean) {\n            this.clip_live = clip_live;\n            this.messenger = messenger;\n            this.deferlow = deferlow;\n        }\n\n        set_session_record(int) {\n            this.clip_live.set(\"session_record\", int);\n        }\n\n        set_overdub(int) {\n            this.clip_live.set(\"overdub\", int);\n        }\n\n        set_tempo(int) {\n            this.clip_live.set(\"tempo\", int);\n        }\n\n        start() {\n            this.clip_live.set(\"is_playing\", 1);\n        }\n\n        stop() {\n            this.clip_live.set(\"is_playing\", 0);\n        }\n\n        get_scenes(): any[] {\n            return this.clip_live.get(\"scenes\")\n        }\n    }\n}"]}