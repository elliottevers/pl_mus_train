{"version":3,"file":"scene.js","sourceRoot":"","sources":["scene.ts"],"names":[],"mappings":";;AAEA,IAAiB,KAAK,CA4FrB;AA5FD,WAAiB,KAAK;IAElB;QAII,eAAY,SAAS;YACjB,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC/B,CAAC;QAEM,oBAAI,GAAX,UAAY,YAAqB;YAC7B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAA;QACrC,CAAC;QAEM,sBAAM,GAAb;YACI,kBAAkB;YAClB,OAAM;QACV,CAAC;QACL,YAAC;IAAD,CAAC,AAhBD,IAgBC;IAhBY,WAAK,QAgBjB,CAAA;IAMD;QAAA;QAIA,CAAC;QAHG,8BAAI,GAAJ,UAAK,YAAqB;YACtB,OAAM;QACV,CAAC;QACL,sBAAC;IAAD,CAAC,AAJD,IAIC;IAJY,qBAAe,kBAI3B,CAAA;IAED;QAGI,kBAAY,QAAsB;YAC9B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAA;QAC5B,CAAC;QAEM,uBAAI,GAAX,UAAY,YAAqB;YAC7B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,YAAY,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAA;QACxD,CAAC;QACL,eAAC;IAAD,CAAC,AAVD,IAUC;IAVY,cAAQ,WAUpB,CAAA;IAED;QAKI,uBAAY,MAAe,EAAE,iBAA0B;YACnD,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,IAAI,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;YAC3C,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QAChB,CAAC;QAED,0BAA0B;QACnB,4BAAI,GAAX;YACI,IAAI,eAAe,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAExD,IAAI,CAAC,CAAC,IAAI,eAAe,CAAC;YAE1B,IAAI,IAAI,CAAC,CAAC,GAAG,CAAC,EAAE;gBACZ,MAAM,sBAAsB,CAAA;aAC/B;YAED,IAAI,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;gBAC7B,OAAO;oBACH,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;oBAC1B,IAAI,EAAE,KAAK;iBACd,CAAA;aACJ;iBAAM;gBACH,OAAO;oBACH,KAAK,EAAE,IAAI;oBACX,IAAI,EAAE,IAAI;iBACb,CAAA;aACJ;QACL,CAAC;QAEM,+BAAO,GAAd;YACI,IAAI,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE;gBACb,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aAC9B;iBAAM;gBACH,OAAO,IAAI,CAAC;aACf;QACL,CAAC;QAEM,6BAAK,GAAZ;YACI,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QAChB,CAAC;QAEM,yCAAiB,GAAxB;YACI,OAAO,IAAI,CAAC,CAAC,CAAC;QAClB,CAAC;QACL,oBAAC;IAAD,CAAC,AAjDD,IAiDC;IAjDY,mBAAa,gBAiDzB,CAAA;AACL,CAAC,EA5FgB,KAAK,GAAL,aAAK,KAAL,aAAK,QA4FrB","sourcesContent":["import {live as li} from \"../live/live\";\n\nexport namespace scene {\n\n    export class Scene {\n\n        scene_dao: SceneDao;\n\n        constructor(scene_dao) {\n            this.scene_dao = scene_dao;\n        }\n\n        public fire(force_legato: boolean) {\n            this.scene_dao.fire(force_legato)\n        }\n\n        public get_id(): string {\n            // TODO: implement\n            return\n        }\n    }\n\n    export interface iSceneDao {\n        fire(force_legato: boolean)\n    }\n\n    export class SceneDaoVirtual implements iSceneDao {\n        fire(force_legato: boolean) {\n            return\n        }\n    }\n\n    export class SceneDao implements iSceneDao {\n        live_api: li.LiveApiJs;\n\n        constructor(live_api: li.LiveApiJs) {\n            this.live_api = live_api\n        }\n\n        public fire(force_legato: boolean) {\n            this.live_api.call(\"fire\", force_legato ? '1' : '0')\n        }\n    }\n\n    export class SceneIterator {\n        private scenes: Scene[];\n        public direction_forward: boolean;\n        private i: number;\n\n        constructor(scenes: Scene[], direction_forward: boolean) {\n            this.scenes = scenes;\n            this.direction_forward = direction_forward;\n            this.i = -1;\n        }\n\n        // TODO: type declarations\n        public next() {\n            let value_increment = (this.direction_forward) ? 1 : -1;\n\n            this.i += value_increment;\n\n            if (this.i < 0) {\n                throw 'segment iterator < 0'\n            }\n\n            if (this.i < this.scenes.length) {\n                return {\n                    value: this.scenes[this.i],\n                    done: false\n                }\n            } else {\n                return {\n                    value: null,\n                    done: true\n                }\n            }\n        }\n\n        public current() {\n            if (this.i > -1) {\n                return this.scenes[this.i];\n            } else {\n                return null;\n            }\n        }\n\n        public reset() {\n            this.i = -1;\n        }\n\n        public get_index_current() {\n            return this.i;\n        }\n    }\n}"]}