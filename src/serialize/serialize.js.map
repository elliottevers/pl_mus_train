{"version":3,"file":"serialize.js","sourceRoot":"","sources":["serialize.ts"],"names":[],"mappings":";;AAGA,sCAAyC;AAEzC,IAAiB,SAAS,CAuDzB;AAvDD,WAAiB,SAAS;IAEX,wBAAc,GAAG,UAAC,IAA+B;QACxD,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACtC,CAAC,CAAC;IAES,0BAAgB,GAAG,UAAC,eAAe;QAC1C,IAAI,eAAe,KAAK,IAAI,EAAE;YAC1B,OAAO,IAAI,CAAA;SACd;QACD,IAAI,IAAI,GAAG,IAAI,SAAS,EAAE,CAAC;QAC3B,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC,CAAC;IACnD,CAAC,CAAC;IAIS,6BAAmB,GAAG,UAAC,SAAoB;QAClD,IAAI,oBAAoB,GAAG,SAAS,CAAC;QACrC,oBAAoB,CAAC,IAAI,GAAG,UAAA,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAC3D,OAAO,oBAAoB,CAAC;IAChC,CAAC,CAAC;IAES,+BAAqB,GAAG,UAAC,oBAAoB;QACpD,IAAI,sBAAsB,GAAG,oBAAoB,CAAC;QAClD,sBAAsB,CAAC,IAAI,GAAG,UAAA,gBAAgB,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAA;QACzE,OAAO,sBAAsB,CAAC;IAClC,CAAC,CAAC;IAEF,kDAAkD;IAEvC,mCAAyB,GAAG,UAAC,eAAe;QACnD,IAAI,0BAA0B,GAAG,eAAe,CAAC;QACjD,KAAK,IAAI,QAAQ,IAAI,eAAe,EAAE;YAClC,IAAI,UAAU,GAAG,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,cAAc,EAAE,CAAC;YACpE,KAAK,IAAI,WAAW,IAAI,UAAU,EAAE;gBAChC,IAAI,SAAS,GAAG,UAAU,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC;gBAChD,0BAA0B,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,GAAG,UAAA,mBAAmB,CAAC,SAAS,CAAC,CAAA;aACrG;SACJ;QACD,OAAO,0BAA0B,CAAC;IACtC,CAAC,CAAC;IAEF,oBAAoB;IACT,qCAA2B,GAAG,UAAC,0BAA0B;QAChE,IAAI,4BAA4B,GAAG,0BAA0B,CAAC;QAE9D,KAAK,IAAI,QAAQ,IAAI,0BAA0B,EAAE;YAC7C,IAAI,UAAU,GAAG,0BAA0B,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,cAAc,EAAE,CAAC;YAC/E,KAAK,IAAI,WAAW,IAAI,UAAU,EAAE;gBAChC,IAAI,SAAS,GAAG,UAAU,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC;gBAChD,4BAA4B,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,GAAG,UAAA,qBAAqB,CAAC,SAAS,CAAC,CAAA;aACzG;SACJ;QACD,OAAO,4BAA4B,CAAC;IACxC,CAAC,CAAC;AACN,CAAC,EAvDgB,SAAS,GAAT,iBAAS,KAAT,iBAAS,QAuDzB","sourcesContent":["import {history} from \"../history/history\";\nimport {target} from \"../target/target\";\nimport {note} from \"../note/note\";\nimport TreeModel = require(\"tree-model\");\n\nexport namespace serialize {\n\n    export let serialize_note = (note: TreeModel.Node<note.Note>) => {\n        return JSON.stringify(note.model);\n    };\n\n    export let deserialize_note = (note_serialized) => {\n        if (note_serialized === null) {\n            return null\n        }\n        let tree = new TreeModel();\n        return tree.parse(JSON.parse(note_serialized));\n    };\n\n    import Subtarget = target.Subtarget;\n\n    export let serialize_subtarget = (subtarget: Subtarget) => {\n        let subtarget_serialized = subtarget;\n        subtarget_serialized.note = serialize_note(subtarget.note);\n        return subtarget_serialized;\n    };\n\n    export let deserialize_subtarget = (subtarget_serialized) => {\n        let subtarget_deserialized = subtarget_serialized;\n        subtarget_deserialized.note = deserialize_note(subtarget_serialized.note)\n        return subtarget_deserialized;\n    };\n\n    // import SequenceTarget = history.SequenceTarget;\n\n    export let serialize_target_sequence = (sequence_target) => {\n        let sequence_target_serialized = sequence_target;\n        for (let i_target in sequence_target) {\n            let subtargets = sequence_target[Number(i_target)].get_subtargets();\n            for (let i_subtarget in subtargets) {\n                let subtarget = subtargets[Number(i_subtarget)];\n                sequence_target_serialized[Number(i_target)][Number(i_subtarget)] = serialize_subtarget(subtarget)\n            }\n        }\n        return sequence_target_serialized;\n    };\n\n    // TODO: deserialize\n    export let deserialize_target_sequence = (sequence_target_serialized) => {\n        let sequence_target_deserialized = sequence_target_serialized;\n\n        for (let i_target in sequence_target_serialized) {\n            let subtargets = sequence_target_serialized[Number(i_target)].get_subtargets();\n            for (let i_subtarget in subtargets) {\n                let subtarget = subtargets[Number(i_subtarget)];\n                sequence_target_deserialized[Number(i_target)][Number(i_subtarget)] = deserialize_subtarget(subtarget)\n            }\n        }\n        return sequence_target_deserialized;\n    };\n}"]}