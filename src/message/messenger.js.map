{"version":3,"file":"messenger.js","sourceRoot":"","sources":["messenger.ts"],"names":[],"mappings":";;AAEA,IAAiB,OAAO,CA4EvB;AA5ED,WAAiB,SAAO;IAEpB;QAQI,mBAAa,GAAW,EAAE,MAAc,EAAE,SAAkB;YACxD,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;YACf,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC/B,CAAC;QAEM,iCAAa,GAApB;YACI,OAAO,IAAI,CAAC,SAAS,CAAC;QAC1B,CAAC;QAED,2BAAO,GAAP,UAAQ,OAAc;YAElB,QAAQ,IAAI,CAAC,GAAG,EAAE;gBACd,KAAK,KAAK,CAAC,CAAC;oBACR,IAAI,IAAI,CAAC,SAAS,EAAE;wBAChB,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;qBACnC;oBACD,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;oBAC1B,MAAM;iBACT;gBACD,KAAK,MAAM,CAAC,CAAC;oBACT,IAAI,IAAI,CAAC,SAAS,EAAE;wBAChB,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;qBACnC;oBACD,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;oBAC3B,MAAM;iBACT;gBACD,KAAK,cAAc,CAAC,CAAC;oBACjB,IAAI,IAAI,CAAC,SAAS,EAAE;wBAChB,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;qBACnC;oBACD,IAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC;oBACnC,MAAM;iBACT;aAGJ;YACD,IAAI,IAAI,CAAC,GAAG,KAAK,KAAK,EAAE;gBACpB,IAAI,IAAI,CAAC,SAAS,EAAE;oBAChB,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;iBACnC;gBACD,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;aAC7B;iBAAM,IAAI,IAAI,CAAC,GAAG,KAAK,MAAM,EAAE;gBAC5B,IAAI,IAAI,CAAC,SAAS,EAAE;oBAChB,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;iBACnC;gBACD,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;aAC9B;QACL,CAAC;QAED,+BAAW,GAAX,UAAY,OAAc;YACtB,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;QACjC,CAAC;QAED,gCAAY,GAAZ,UAAa,OAAc;YACvB,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;YAC1B,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YAClB,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YACrB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACtB,CAAC;QAED,wCAAoB,GAApB,UAAqB,OAAc;YAC/B,IAAM,GAAG,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;YAC/B,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACxB,CAAC;QACL,gBAAC;IAAD,CAAC,AAzED,IAyEC;IAzEY,mBAAS,YAyErB,CAAA;AACL,CAAC,EA5EgB,OAAO,GAAP,eAAO,KAAP,eAAO,QA4EvB","sourcesContent":["declare function outlet(n: number, o: any): void;\n\nexport namespace message {\n\n    export class Messenger {\n\n        private env: string;\n\n        private outlet: number;\n\n        private key_route: string;\n\n        constructor (env: string, outlet: number, key_route?: string) {\n            this.env = env;\n            this.outlet = outlet;\n            this.key_route = key_route;\n        }\n\n        public get_key_route(): string {\n            return this.key_route;\n        }\n\n        message(message: any[]) {\n\n            switch (this.env) {\n                case 'max': {\n                    if (this.key_route) {\n                        message.unshift(this.key_route);\n                    }\n                    this.message_max(message);\n                    break;\n                }\n                case 'node': {\n                    if (this.key_route) {\n                        message.unshift(this.key_route);\n                    }\n                    this.message_node(message);\n                    break;\n                }\n                case 'node_for_max': {\n                    if (this.key_route) {\n                        message.unshift(this.key_route);\n                    }\n                    this.message_node_for_max(message);\n                    break;\n                }\n\n\n            }\n            if (this.env === 'max') {\n                if (this.key_route) {\n                    message.unshift(this.key_route);\n                }\n                this.message_max(message);\n            } else if (this.env === 'node') {\n                if (this.key_route) {\n                    message.unshift(this.key_route);\n                }\n                this.message_node(message);\n            }\n        }\n\n        message_max(message: any[]): void {\n            outlet(this.outlet, message);\n        }\n\n        message_node(message: any[]): void {\n            console.log(\"Messenger:\");\n            console.log(\"\\n\");\n            console.log(message);\n            console.log(\"\\n\");\n        }\n\n        message_node_for_max(message: any[]): void {\n            const Max = require('max-api');\n            Max.outlet(message);\n        }\n    }\n}"]}