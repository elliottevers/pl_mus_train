{"version":3,"file":"messenger.js","sourceRoot":"","sources":["messenger.ts"],"names":[],"mappings":";;AAEA,IAAiB,OAAO,CAgDvB;AAhDD,WAAiB,SAAO;IAEpB,sBAAsB;IACtB,6BAA6B;IAE7B;QAQI,mBAAa,GAAW,EAAE,MAAc,EAAE,SAAkB;YACxD,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;YACf,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC/B,CAAC;QAEM,iCAAa,GAApB;YACI,OAAO,IAAI,CAAC,SAAS,CAAC;QAC1B,CAAC;QAED,2BAAO,GAAP,UAAQ,OAAc;YAClB,IAAI,IAAI,CAAC,GAAG,KAAK,KAAK,EAAE;gBACpB,IAAI,IAAI,CAAC,SAAS,EAAE;oBAChB,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;iBACnC;gBACD,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;aAC7B;iBAAM,IAAI,IAAI,CAAC,GAAG,KAAK,MAAM,EAAE;gBAC5B,IAAI,IAAI,CAAC,SAAS,EAAE;oBAChB,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;iBACnC;gBACD,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;aAC9B;QACL,CAAC;QAED,+BAAW,GAAX,UAAY,OAAc;YACtB,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;QACjC,CAAC;QAED,gCAAY,GAAZ,UAAa,OAAc;YACvB,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;YAC1B,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YAClB,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YACrB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACtB,CAAC;QACL,gBAAC;IAAD,CAAC,AA1CD,IA0CC;IA1CY,mBAAS,YA0CrB,CAAA;AACL,CAAC,EAhDgB,OAAO,GAAP,eAAO,KAAP,eAAO,QAgDvB","sourcesContent":["declare function outlet(n: number, o: any): void;\n\nexport namespace message {\n\n    // TODO: the following\n    // type Env = 'max' | 'node';\n\n    export class Messenger {\n\n        private env: string;\n\n        private outlet: number;\n\n        private key_route: string;\n\n        constructor (env: string, outlet: number, key_route?: string) {\n            this.env = env;\n            this.outlet = outlet;\n            this.key_route = key_route;\n        }\n\n        public get_key_route(): string {\n            return this.key_route;\n        }\n\n        message(message: any[]) {\n            if (this.env === 'max') {\n                if (this.key_route) {\n                    message.unshift(this.key_route);\n                }\n                this.message_max(message);\n            } else if (this.env === 'node') {\n                if (this.key_route) {\n                    message.unshift(this.key_route);\n                }\n                this.message_node(message);\n            }\n        }\n\n        message_max(message: any[]): void {\n            outlet(this.outlet, message);\n        }\n\n        message_node(message: any[]): void {\n            console.log(\"Messenger:\");\n            console.log(\"\\n\");\n            console.log(message);\n            console.log(\"\\n\");\n        }\n    }\n}"]}