{"version":3,"file":"extract_beatmap.js","sourceRoot":"","sources":["../../src/scripts/extract_beatmap.ts"],"names":[],"mappings":";;AAAA,kDAA6C;AAC7C,IAAO,SAAS,GAAG,mBAAO,CAAC,SAAS,CAAC;AACrC,qCAAwC;AACxC,qCAAkC;AAClC,IAAO,IAAI,GAAG,WAAI,CAAC,IAAI,CAAC;AACxB,IAAO,OAAO,GAAG,WAAI,CAAC,OAAO,CAAC;AAa9B,IAAI,GAAG,GAAW,KAAK,CAAC;AAExB,IAAI,GAAG,KAAK,KAAK,EAAE;IACf,IAAI,CAAC,sBAAsB,CAAC,CAAC;IAC7B,SAAS,GAAG,CAAC,CAAC;CACjB;AAED,IAAI,oBAAoB,GAAG,IAAI,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,YAAY,CAAC,CAAC;AAE/D,IAAI,kBAAkB,GAAG,IAAI,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,UAAU,CAAC,CAAC;AAE3D,IAAI,sBAAsB,GAAG,IAAI,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,cAAc,CAAC,CAAC;AAEnE,IAAI,aAAa,GAAG,IAAI,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;AAEjD,IAAI,sBAAsB,GAAG;IAEzB,IAAI,iBAAiB,GAAG,IAAI,IAAI,CAC5B,IAAI,OAAO,CACP,IAAI,WAAE,CAAC,SAAS,CACZ,0CAA0C,CAC7C,EACD,IAAI,SAAS,CAAC,GAAG,EAAE,CAAC,CAAC,CACxB,CACJ,CAAC;IAEF,IAAI,UAAU,GAAG,iBAAiB,CAAC,sBAAsB,EAAE,CAAC;IAE5D,IAAI,QAAQ,GAAG,iBAAiB,CAAC,sBAAsB,EAAE,CAAC;IAE1D,IAAI,YAAY,GAAG,CAAC,iBAAiB,CAAC,cAAc,EAAE,GAAG,iBAAiB,CAAC,gBAAgB,EAAE,CAAC,GAAC,CAAC,CAAC;IAEjG,oBAAoB,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;IAEnD,kBAAkB,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAE/C,sBAAsB,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;IAEvD,aAAa,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;AAC9B,CAAC,CAAC;AAEF,IAAI,IAAI,GAAG;AAEX,CAAC,CAAC;AAGF,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;IAC/B,MAAM,CAAC,eAAe,GAAG,EAAE,CAAC;IAC5B,MAAM,CAAC,eAAe,CAAC,sBAAsB,GAAG,sBAAsB,CAAC;CAC1E","sourcesContent":["import {message} from \"../message/messenger\";\nimport Messenger = message.Messenger;\nimport {live as li} from \"../live/live\";\nimport {clip} from \"../clip/clip\";\nimport Clip = clip.Clip;\nimport ClipDao = clip.ClipDao;\n\ndeclare let autowatch: any;\ndeclare let inlets: any;\ndeclare let outlets: any;\ndeclare function outlet(n: number, o: any): void;\ndeclare function post(message?: any): void;\ndeclare let Dict: any;\n\nexport {}\n\ndeclare let Global: any;\n\nlet env: string = 'max';\n\nif (env === 'max') {\n    post('recompile successful');\n    autowatch = 1;\n}\n\nlet messenger_beat_start = new Messenger(env, 0, 'beat_start');\n\nlet messenger_beat_end = new Messenger(env, 0, 'beat_end');\n\nlet messenger_length_beats = new Messenger(env, 0, 'length-beats');\n\nlet messenger_run = new Messenger(env, 0, 'run');\n\nlet extract_beatmap_manual = () => {\n\n    let clip_audio_warped = new Clip(\n        new ClipDao(\n            new li.LiveApiJs(\n                'live_set view highlighted_clip_slot clip'\n            ),\n            new Messenger(env, 0)\n        )\n    );\n\n    let beat_start = clip_audio_warped.get_loop_bracket_lower();\n\n    let beat_end = clip_audio_warped.get_loop_bracket_upper();\n\n    let length_beats = (clip_audio_warped.get_end_marker() - clip_audio_warped.get_start_marker())/4;\n\n    messenger_beat_start.message([Number(beat_start)]);\n\n    messenger_beat_end.message([Number(beat_end)]);\n\n    messenger_length_beats.message([Number(length_beats)]);\n\n    messenger_run.message([]);\n};\n\nlet test = () => {\n\n};\n\n\nif (typeof Global !== \"undefined\") {\n    Global.extract_beatmap = {};\n    Global.extract_beatmap.extract_beatmap_manual = extract_beatmap_manual;\n}\n"]}