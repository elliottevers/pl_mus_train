{"version":3,"file":"train.js","sourceRoot":"","sources":["train.ts"],"names":[],"mappings":"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","sourcesContent":["import {note as n} from \"../../src/note/note\";\nimport TreeModel = require(\"tree-model\");\nimport {user_input} from \"../../src/control/user_input\";\nimport UserInputHandler = user_input.UserInputHandler;\nimport {message} from \"../../src/message/messenger\";\nimport Messenger = message.Messenger;\nimport {live} from \"../../src/live/live\";\nimport LiveClipVirtual = live.LiveClipVirtual;\nimport {segment} from \"../../src/segment/segment\";\nimport Segment = segment.Segment;\nimport {clip} from \"../../src/clip/clip\";\nimport Clip = clip.Clip;\nimport {algorithm} from \"../../src/train/algorithm\";\nimport Detect = algorithm.Detect;\nimport {freeze, thaw} from \"../../src/serialize/serialize\";\nimport TrainFreezer = freeze.TrainFreezer;\nimport TrainThawer = thaw.TrainThawer;\nimport {window} from \"../../src/render/window\";\nimport ListWindow = window.ListWindow;\nimport {trainer} from \"../../src/train/trainer\";\nimport Trainer = trainer.Trainer;\nimport {modes_control, modes_texture} from \"../../src/constants/constants\";\nimport POLYPHONY = modes_texture.POLYPHONY;\nimport INSTRUMENTAL = modes_control.INSTRUMENTAL;\nimport MONOPONY = modes_texture.MONOPONY;\nimport VOCAL = modes_control.VOCAL;\n\n\nlet tree: TreeModel = new TreeModel();\n\n// let segment_note_1 = tree.parse(\n//     {\n//         id: -1, // TODO: hashing scheme for clip id and beat start\n//         note: new n.Note(\n//             51,\n//             1,\n//             4,\n//             90,\n//             0\n//         ),\n//         children: [\n//\n//         ]\n//     }\n// );\n//\n// let segment_note_2 = tree.parse(\n//     {\n//         id: -1, // TODO: hashing scheme for clip id and beat start\n//         note: new n.Note(\n//             51,\n//             5,\n//             4,\n//             90,\n//             0\n//         ),\n//         children: [\n//\n//         ]\n//     }\n// );\n//\n//\n//\n// let note_target_1_subtarget_1 = tree.parse(\n//     {\n//             id: -1, // TODO: hashing scheme for clip id and beat start\n//             note: new n.Note(\n//                 51,\n//                 1,\n//                 2,\n//                 90,\n//                 0\n//             ),\n//             children: [\n//\n//             ]\n//     }\n// );\n//\n// let note_target_1_subtarget_2 = tree.parse(\n//     {\n//             id: -1, // TODO: hashing scheme for clip id and beat start\n//             note: new n.Note(\n//                 53,\n//                 1,\n//                 2,\n//                 90,\n//                 0\n//             ),\n//             children: [\n//\n//             ]\n//     }\n// );\n//\n//\n//\n// let note_target_2_subtarget_1 = tree.parse(\n//     {\n//             id: -1, // TODO: hashing scheme for clip id and beat start\n//             note: new n.Note(\n//                 52,\n//                 3,\n//                 2,\n//                 90,\n//                 0\n//             ),\n//             children: [\n//\n//             ]\n//     }\n// );\n//\n// let note_target_2_subtarget_2 = tree.parse(\n//     {\n//             id: -1, // TODO: hashing scheme for clip id and beat start\n//             note: new n.Note(\n//                 54,\n//                 3,\n//                 2,\n//                 90,\n//                 0\n//             ),\n//             children: [\n//\n//             ]\n//     }\n// );\n//\n//\n//\n// let note_target_3_subtarget_1 = tree.parse(\n//     {\n//             id: -1, // TODO: hashing scheme for clip id and beat start\n//             note: new n.Note(\n//                 53,\n//                 5,\n//                 2,\n//                 90,\n//                 0\n//             ),\n//             children: [\n//\n//             ]\n//     }\n// );\n//\n// let note_target_3_subtarget_2 = tree.parse(\n//     {\n//             id: -1, // TODO: hashing scheme for clip id and beat start\n//             note: new n.Note(\n//                 55,\n//                 5,\n//                 2,\n//                 90,\n//                 0\n//             ),\n//             children: [\n//\n//             ]\n//     }\n// );\n//\n//\n//\n// let note_target_4_subtarget_1 = tree.parse(\n//     {\n//             id: -1, // TODO: hashing scheme for clip id and beat start\n//             note: new n.Note(\n//                 54,\n//                 7,\n//                 2,\n//                 90,\n//                 0\n//             ),\n//             children: [\n//\n//             ]\n//     }\n// );\n//\n// let note_target_4_subtarget_2 = tree.parse(\n//     {\n//             id: -1, // TODO: hashing scheme for clip id and beat start\n//             note: new n.Note(\n//                 56,\n//                 7,\n//                 2,\n//                 90,\n//                 0\n//             ),\n//             children: [\n//\n//             ]\n//     }\n// );\n//\n//\n// let mode_texture = POLYPHONY;\n// let mode_control = INSTRUMENTAL;\n//\n// let user_input_handler = new UserInputHandler(\n//     mode_texture,\n//     mode_control\n// );\n//\n// let env: string = 'node_for_max';\n// env = 'node';\n//\n//\n// let messenger = new Messenger(env, 0, 'render');\n//\n// let window_local = new ListWindow(\n//     384,\n//     384,\n//     messenger\n// );\n//\n// let algorithm_train = new Detect(\n//     user_input_handler\n// );\n//\n// // stubs\n// let song = {\n//     set_overdub: (int) => {},\n//     set_session_record: (int) => {}\n// };\n//\n// let clip_user_input = {\n//     fire: () => {},\n//     stop: () => {},\n//     set_endpoints_loop: (former, latter) => {}\n// };\n//\n// let notes_segments = [\n//     segment_note_1,\n//     segment_note_2\n// ];\n//\n// let notes_target_clip = [\n//     note_target_1_subtarget_1,\n//     note_target_1_subtarget_2,\n//     note_target_2_subtarget_1,\n//     note_target_2_subtarget_2,\n//     note_target_3_subtarget_1,\n//     note_target_3_subtarget_2,\n//     note_target_4_subtarget_1,\n//     note_target_4_subtarget_2\n// ];\n//\n// let segments: Segment[] = [];\n//\n// for (let note of notes_segments) {\n//     segments.push(\n//         new Segment(\n//             note\n//         )\n//     )\n// }\n//\n// let clip_dao_virtual = new LiveClipVirtual(notes_target_clip);\n//\n// let clip_target_virtual = new Clip(clip_dao_virtual);\n//\n// let trainer_local = new Trainer(\n//     window_local,\n//     user_input_handler,\n//     algorithm_train,\n//     clip_user_input,\n//     clip_target_virtual,\n//     song,\n//     segments,\n//     messenger\n// );\n//\n// // test case - 2 segments, 2 notes a piece\n//\n// trainer_local.init(\n//\n// );\n//\n// trainer_local.accept_input(\n//     [note_target_1_subtarget_1]\n// );\n//\n// trainer_local.accept_input(\n//     [note_target_1_subtarget_2]\n// );\n//\n// trainer_local.accept_input(\n//     [note_target_2_subtarget_1]\n// );\n//\n// trainer_local.accept_input(\n//     [note_target_2_subtarget_2]\n// );\n//\n// trainer_local.accept_input(\n//     [note_target_3_subtarget_1]\n// );\n//\n// trainer_local.render_window(\n//\n// );\n//\n// trainer_local.clear_window(\n//\n// );\n//\n// let freezer = new TrainFreezer(\n//     env\n// );\n//\n// freezer.freeze(\n//     trainer_local,\n//     '/Users/elliottevers/Documents/DocumentsSymlinked/git-repos.nosync/tk_music_ts/cache/train.json'\n// );\n//\n// let thawer = new TrainThawer(\n//     env\n// );\n//\n// let config = {\n//     'window': window_local,\n//     'user_input_handler': user_input_handler,\n//     'algorithm': algorithm_train,\n//     'clip_user_input': clip_user_input,\n//     'clip_target_virtual': clip_target_virtual,\n//     'song': song,\n//     'segments': segments,\n//     'messenger': messenger,\n//     'env': env\n// };\n//\n// let train_thawed = thawer.thaw(\n//     '/Users/elliottevers/Documents/DocumentsSymlinked/git-repos.nosync/tk_music_ts/cache/train.json',\n//     config\n// );\n//\n// train_thawed.render_window(\n//\n// );\n\n\n// TODO: to finish test case, verify that it looks correct in window\n\n\n\n\n\n// PARSE\n\n// let tree: TreeModel = new TreeModel();\n\nlet segment_note_1_parse = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            51,\n            1,\n            4,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\nlet segment_note_2_parse = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            51,\n            5,\n            4,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\n\n\nlet note_melody_1 = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            51,\n            1,\n            2,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\nlet note_melody_2 = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            53,\n            3,\n            2,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\n\n\nlet note_melody_3 = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            55,\n            5,\n            2,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\nlet note_melody_4 = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            56,\n            7,\n            2,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\n\n\nlet note_summarized_melody_1 = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            51,\n            1,\n            4,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\nlet note_summarized_melody_2 = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            55,\n            5,\n            4,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\nlet note_summarized_root = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            51,\n            1,\n            8,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\n\nlet mode_texture_parse = MONOPONY;\nlet mode_control_parse = VOCAL;\n\nlet user_input_handler_parse = new UserInputHandler(\n    mode_texture_parse,\n    mode_control_parse\n);\n\nlet env_parse: string = 'node_for_max';\nenv_parse = 'node';\n\n\nlet messenger_parse = new Messenger(env_parse, 0, 'render_parse');\n\nlet window_local_parse = new ListWindow(\n    384,\n    384,\n    messenger_parse\n);\n\nlet algorithm_train_parse = new Detect(\n    user_input_handler_parse\n);\n\n// stubs\nlet song_parse = {\n    set_overdub: (int) => {},\n    set_session_record: (int) => {}\n};\n\nlet clip_user_input_parse = {\n    fire: () => {},\n    stop: () => {},\n    set_endpoints_loop: (former, latter) => {}\n};\n\nlet notes_segments_parse = [\n    segment_note_1_parse,\n    segment_note_2_parse\n];\n\nlet notes_target_clip_parse = [\n    note_melody_1,\n    note_melody_2,\n    note_melody_3,\n    note_melody_4,\n    // note_target_3_subtarget_1,\n    // note_target_3_subtarget_2,\n    // note_target_4_subtarget_1,\n    // note_target_4_subtarget_2\n];\n\nlet segments_parse: Segment[] = [];\n\nfor (let note of notes_segments_parse) {\n    segments_parse.push(\n        new Segment(\n            note\n        )\n    )\n}\n\nlet clip_dao_virtual_parse = new LiveClipVirtual(notes_target_clip_parse);\n\nlet clip_target_virtual_parse = new Clip(clip_dao_virtual_parse);\n\nlet trainer_local_parse = new Trainer(\n    window_local_parse,\n    user_input_handler_parse,\n    algorithm_train_parse,\n    clip_user_input_parse,\n    clip_target_virtual_parse,\n    song_parse,\n    segments_parse,\n    messenger_parse\n);\n\n// test case - 2 segments, 2 notes a piece\n\ntrainer_local_parse.init(\n\n);\n\ntrainer_local_parse.accept_input(\n    [note_target_1_subtarget_1]\n);\n\ntrainer_local_parse.accept_input(\n    [note_target_1_subtarget_2]\n);\n\ntrainer_local_parse.accept_input(\n    [note_target_2_subtarget_1]\n);\n\ntrainer_local_parse.accept_input(\n    [note_target_2_subtarget_2]\n);\n\ntrainer_local_parse.accept_input(\n    [note_target_3_subtarget_1]\n);\n\ntrainer_local_parse.render_window(\n\n);\n\ntrainer_local_parse.clear_window(\n\n);\n\nlet freezer_parse = new TrainFreezer(\n    env\n);\n\nfreezer_parse.freeze(\n    trainer_local,\n    '/Users/elliottevers/Documents/DocumentsSymlinked/git-repos.nosync/tk_music_ts/cache/train.json'\n);\n\nlet thawer_parse = new TrainThawer(\n    env_parse\n);\n\nlet config_parse = {\n    'window': window_local_parse,\n    'user_input_handler': user_input_handler_parse,\n    'algorithm': algorithm_train_parse,\n    'clip_user_input': clip_user_input_parse,\n    'clip_target_virtual': clip_target_virtual_parse,\n    'song': song_parse,\n    'segments': segments_parse,\n    'messenger': messenger_parse,\n    'env': env_parse\n};\n\nlet train_thawed_parse = thawer_parse.thaw(\n    '/Users/elliottevers/Documents/DocumentsSymlinked/git-repos.nosync/tk_music_ts/cache/train.json',\n    config\n);\n\ntrain_thawed_parse.render_window(\n\n);"]}