{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["import \"mocha\";\nimport TreeModel = require(\"tree-model\");\nconst assert = require(\"chai\").assert;\nconst sinon = require(\"sinon\");\nconst sinonTest = require('sinon-test');\nconst test = sinonTest(sinon);\n\ndescribe('tree', function () {\n    it('works', ()=>{\n        // let tree = new TreeModel();\n        //\n        // let root = tree.parse({\n        //     id: 1,\n        //     attribute_test: 'hello world',\n        //     children: [\n        //         {\n        //             id: 11,\n        //             children: [{id: 111}]\n        //         },\n        //         {\n        //             id: 12,\n        //             children: [{id: 121}, {id: 122}]\n        //         },\n        //         {\n        //             id: 13\n        //         }\n        //     ]\n        // });\n        //\n        // let path_length = root.first(function (node) {     return node.model.attribute_test === 'hello world'; });\n        // assert.equal(path_length, 2);\n    })\n});\n\nimport {note as n} from \"../src/note/note\"\n\nimport {phrase as p} from \"../src/phrase/phrase\"\n\nimport {message as m} from \"../src/message/messenger\"\n\nimport {clip as c} from \"../src/clip/clip\"\n\nimport {window as w} from \"../src/render/window\";\nimport {log} from \"../src/log/logger\";\n\n\ndescribe('Phrase', ()=>{\n\n    it('is capable of iteration', test(()=>{\n        // TODO: make 1 phrase consisting of quarter notes\n        // TODO: iterate twice and ensure that the result starts on beat 3\n        // TODO: make clip DAO stub\n\n        let messenger = new m.Messenger('node', 0);\n\n        let stub_live_api = {\n            get: (property: string): any => {return 0},\n            set: (property: string, value: any): void => {},\n            call: (func: string,  ...args: any[]): any => {return 0}\n        };\n\n        let clip_dao = new c.ClipDao(stub_live_api, messenger, false);\n\n        sinon.stub(clip_dao, \"get_start_marker\").callsFake(() => {\n            return 0;\n        });\n\n        sinon.stub(clip_dao, \"get_end_marker\").callsFake(() => {\n            return 4;\n        });\n\n        sinon.stub(clip_dao, \"get_notes\").callsFake(() => {\n            return [\"notes\",2,\"note\",50,0,1,127,0,\"note\",52,1,1,127,0,\"note\",54,2,2,127,0,\"done\"]\n        });\n\n        let clip = new c.Clip(clip_dao);\n\n        clip.load_notes();\n\n        let phrase = new p.Phrase(\n            clip.get_start_marker(),\n            clip.get_end_marker(),\n            clip\n        );\n\n        let note_iterator = phrase.note_iterator;\n\n        // TODO: see why undefined\n        // let note = note_iterator.next().value;\n\n        // TODO: assert result starts on beat 3\n\n    }));\n});\n\ndescribe('PredictionPreprocessor', ()=> {\n    it('obeys limit', ()=>{\n\n    });\n\n    it('resets properly', ()=>{\n\n    });\n    // function test() {\n    //\n    //     function assert(statement) {\n    //         if (!eval(statement)) {\n    //             throw statement\n    //         }\n    //     }\n    //\n    //     var prediction_preprocessor = new PredictionPreprocessor('monophonic_guitar');\n    //\n    //     assert('prediction_preprocessor.get_state_primed() === false');\n    //\n    //     prediction_preprocessor.accept(60);\n    //\n    //     assert('prediction_preprocessor.get_state_primed() === true');\n    //     assert('JSON.stringify(prediction_preprocessor.get_prediction()) === JSON.stringify([60])');\n    //\n    //     prediction_preprocessor.accept(62);\n    //     prediction_preprocessor.accept(64);\n    //\n    //     assert('prediction_preprocessor.get_state_primed() === true');\n    //     assert('JSON.stringify(prediction_preprocessor.get_prediction()) === JSON.stringify([60])');\n    //\n    //     prediction_preprocessor.reset();\n    //\n    //     assert('JSON.stringify(prediction_preprocessor.get_prediction()) === JSON.stringify([])');\n    // }\n});\n\ndescribe('Target', ()=>{\n   it('iterates over both phrases and notes', ()=>{\n       // TODO: make 2 phrase, each a measure long, consisting of quarter notes\n       // TODO: iterate until the first note of the second phrase\n       // let index = [1,2,3,4].findIndex((int) => int === 3);\n       // assert.equal(index, 2);\n   }) ;\n});\n\ndescribe('Pwindow', test(()=>{\n\n    it('calculate rendering messages for tree correctly', test(()=>{\n        let env: string = 'node';\n\n        let stub1LiveAPI = {\n            get: () => {return 0},\n            set: () => {},\n            call: () => {}\n        };\n\n        let stub2LiveAPI = {\n            get: () => {return 0},\n            set: () => {},\n            call: () => {}\n        };\n\n        let stub3LiveAPI = {\n            get: () => {return 0},\n            set: () => {},\n            call: () => {}\n        };\n\n        let stub4LiveAPI = {\n            get: () => {return 0},\n            set: () => {},\n            call: () => {}\n        };\n\n        // clip 1\n        let clip_dao_1 = new c.ClipDao(\n            stub1LiveAPI,\n            new m.Messenger(env, 0),\n            false\n        );\n        sinon.stub(clip_dao_1, \"get_start_marker\").callsFake(() => {\n            return 0;\n        });\n        sinon.stub(clip_dao_1, \"get_end_marker\").callsFake(() => {\n            return 4;\n        });\n        sinon.stub(clip_dao_1, \"get_notes\").callsFake(() => {\n            return [\"notes\",1,\"note\",50,0,4,127,0,\"done\"]\n        });\n\n\n        // clip 2\n        let clip_dao_2 = new c.ClipDao(\n            stub2LiveAPI,\n            new m.Messenger(env, 0),\n            false\n        );\n        sinon.stub(clip_dao_2, \"get_start_marker\").callsFake(() => {\n            return 0;\n        });\n        sinon.stub(clip_dao_2, \"get_end_marker\").callsFake(() => {\n            return 4;\n        });\n        sinon.stub(clip_dao_2, \"get_notes\").callsFake(() => {\n            return [\"notes\",2,\"note\",50,0,2,127,0,\"note\",54,2,2,127,0,\"done\"]\n        });\n\n\n        // clip 3\n        let clip_dao_3 = new c.ClipDao(\n            stub3LiveAPI,\n            new m.Messenger(env, 0),\n            false\n        );\n\n        sinon.stub(clip_dao_3, \"get_start_marker\").callsFake(() => {\n            return 0;\n        });\n        sinon.stub(clip_dao_3, \"get_end_marker\").callsFake(() => {\n            return 4;\n        });\n        sinon.stub(clip_dao_3, \"get_notes\").callsFake(() => {\n            return [\"notes\",3,\"note\",50,0,1,127,0,\"note\",52,1,1,127,0,\"note\",54,2,2,127,0,\"done\"]\n        });\n\n\n        // clip 4\n        let clip_dao_4 = new c.ClipDao(\n            stub4LiveAPI,\n            new m.Messenger(env, 0),\n            false\n        );\n\n        sinon.stub(clip_dao_4, \"get_start_marker\").callsFake(() => {\n            return 0;\n        });\n        sinon.stub(clip_dao_4, \"get_end_marker\").callsFake(() => {\n            return 4;\n        });\n        sinon.stub(clip_dao_4, \"get_notes\").callsFake(() => {\n            return [\"notes\",4,\"note\",50,0,1,127,0,\"note\",52,1,1,127,0,\"note\",54,2,1,127,0,\"note\",55,3,1,127,0,\"done\"]\n        });\n\n        let clip_1 = new c.Clip(clip_dao_1);\n        let clip_2 = new c.Clip(clip_dao_2);\n        let clip_3 = new c.Clip(clip_dao_3);\n        let clip_4 = new c.Clip(clip_dao_4);\n\n        clip_1.load_notes();\n        clip_2.load_notes();\n        clip_3.load_notes();\n        clip_4.load_notes();\n\n        var dim = 16 * 6 * 4;\n\n        var pwindow = new w.Pwindow(\n            dim,\n            dim,\n            new m.Messenger(env, 0)\n        );\n\n        pwindow.set_clip(clip_1);\n\n        pwindow.elaborate(\n            clip_2.get_notes(),\n            clip_2.get_notes()[0].model.note.beat_start,\n            clip_2.get_notes()[1].model.note.get_beat_end()\n        );\n\n        pwindow.elaborate(\n            clip_3.get_notes().slice(0, 2),\n            clip_3.get_notes().slice(0, 2)[0].model.note.beat_start,\n            clip_3.get_notes().slice(0, 2)[1].model.note.get_beat_end()\n        );\n\n        pwindow.elaborate(\n            clip_4.get_notes().slice(2, 4),\n            clip_4.get_notes().slice(2, 4)[0].model.note.beat_start,\n            clip_4.get_notes().slice(2, 4)[1].model.note.get_beat_end()\n        );\n\n        // TODO: why wasn't pitch 50 added?  Why was 54 added twice?\n        let messages = pwindow.get_messages_render_tree();\n\n        // TODO: tack on colors to end of message, make color configurable\n        assert.deepEqual(\n            messages[0],\n            ['linesegment', 240, 312, 288, 201.6, 255, 0, 0]\n        );\n\n        assert.deepEqual(\n            messages[1],\n            ['linesegment', 336, 296, 288, 201.6, 255, 0, 0]\n        );\n    }));\n\n    it(\"calculates rendering messages for multiple clips correctly\", test(()=>{\n\n        let env: string = 'node';\n\n        let stub1LiveAPI = {\n            get: () => {return 0},\n            set: () => {},\n            call: () => {}\n        };\n\n        // sinon.stub(stub1LiveAPI, \"get\").callsFake(() => {\n        //\n        // });\n        // sinon.stub(stub1LiveAPI, \"set\").callsFake(() => {\n        //\n        // });\n        // sinon.stub(stub1LiveAPI, \"call\").callsFake(() => {\n        //\n        // });\n\n        let stub2LiveAPI = {\n            get: () => {return 0},\n            set: () => {},\n            call: () => {}\n        };\n\n        // sinon.stub(stub2LiveAPI, \"get\").callsFake(() => {\n        //\n        // });\n        // sinon.stub(stub2LiveAPI, \"set\").callsFake(() => {\n        //\n        // });\n        // sinon.stub(stub2LiveAPI, \"call\").callsFake(() => {\n        //\n        // });\n\n        let stub3LiveAPI = {\n            get: () => {return 0},\n            set: () => {},\n            call: () => {}\n        };\n\n        // sinon.stub(stub3LiveAPI, \"get\").callsFake(() => {\n        //\n        // });\n        // sinon.stub(stub3LiveAPI, \"set\").callsFake(() => {\n        //\n        // });\n        // sinon.stub(stub3LiveAPI, \"call\").callsFake(() => {\n        //\n        // });\n\n        let stub4LiveAPI = {\n            get: () => {return 0},\n            set: () => {},\n            call: () => {}\n        };\n\n        // sinon.stub(stub4LiveAPI, \"get\").callsFake(() => {\n        //\n        // });\n        // sinon.stub(stub4LiveAPI, \"set\").callsFake(() => {\n        //\n        // });\n        // sinon.stub(stub4LiveAPI, \"call\").callsFake(() => {\n        //\n        // });\n\n        // clip 1\n        let clip_dao_1 = new c.ClipDao(\n            stub1LiveAPI,\n            new m.Messenger(env, 0),\n            false\n        );\n        sinon.stub(clip_dao_1, \"get_start_marker\").callsFake(() => {\n            return 0;\n        });\n        sinon.stub(clip_dao_1, \"get_end_marker\").callsFake(() => {\n            return 4;\n        });\n        sinon.stub(clip_dao_1, \"get_notes\").callsFake(() => {\n            return [\"notes\",1,\"note\",50,0,4,127,0,\"done\"]\n        });\n\n\n        // clip 2\n        let clip_dao_2 = new c.ClipDao(\n            stub2LiveAPI,\n            new m.Messenger(env, 0),\n            false\n        );\n        sinon.stub(clip_dao_2, \"get_start_marker\").callsFake(() => {\n            return 0;\n        });\n        sinon.stub(clip_dao_2, \"get_end_marker\").callsFake(() => {\n            return 4;\n        });\n        sinon.stub(clip_dao_2, \"get_notes\").callsFake(() => {\n            return [\"notes\",2,\"note\",50,0,2,127,0,\"note\",54,2,2,127,0,\"done\"]\n        });\n\n\n        // clip 3\n        let clip_dao_3 = new c.ClipDao(\n            stub3LiveAPI,\n            new m.Messenger(env, 0),\n            false\n        );\n\n        sinon.stub(clip_dao_3, \"get_start_marker\").callsFake(() => {\n            return 0;\n        });\n        sinon.stub(clip_dao_3, \"get_end_marker\").callsFake(() => {\n            return 4;\n        });\n        sinon.stub(clip_dao_3, \"get_notes\").callsFake(() => {\n            return [\"notes\",3,\"note\",50,0,1,127,0,\"note\",52,1,1,127,0,\"note\",54,2,2,127,0,\"done\"]\n        });\n\n\n        // clip 4\n        let clip_dao_4 = new c.ClipDao(\n            stub4LiveAPI,\n            new m.Messenger(env, 0),\n            false\n        );\n\n        sinon.stub(clip_dao_4, \"get_start_marker\").callsFake(() => {\n            return 0;\n        });\n        sinon.stub(clip_dao_4, \"get_end_marker\").callsFake(() => {\n            return 4;\n        });\n        sinon.stub(clip_dao_4, \"get_notes\").callsFake(() => {\n            return [\"notes\",4,\"note\",50,0,1,127,0,\"note\",52,1,1,127,0,\"note\",54,2,1,127,0,\"note\",55,3,1,127,0,\"done\"]\n        });\n\n        let clip_1 = new c.Clip(clip_dao_1);\n        let clip_2 = new c.Clip(clip_dao_2);\n        let clip_3 = new c.Clip(clip_dao_3);\n        let clip_4 = new c.Clip(clip_dao_4);\n\n        clip_1.load_notes();\n        clip_2.load_notes();\n        clip_3.load_notes();\n        clip_4.load_notes();\n\n        var dim = 16 * 6 * 4;\n\n        var pwindow = new w.Pwindow(\n            dim,\n            dim,\n            new m.Messenger(env, 0)\n        );\n\n        pwindow.add_clip(clip_4);\n        pwindow.add_clip(clip_3);\n        pwindow.add_clip(clip_2);\n        pwindow.add_clip(clip_1);\n\n        let messages = pwindow.get_messages_render_clips();\n\n        assert.deepEqual(\n            messages[0],\n            ['paintrect', 0, 368, 96, 384]\n        );\n\n        assert.deepEqual(\n            messages[1],\n            ['paintrect', 96, 336, 192, 352]\n        );\n\n        // (288 - (288 - 192)/2), (320 - (320 - 304)/2)\n        // 240, 312\n        assert.deepEqual(\n            messages[2],\n            ['paintrect', 192, 304, 288, 320]\n        );\n\n        // (384 - (384 - 288)/2), (304 - (304 - 288)/2)\n        // 336, 296\n        assert.deepEqual(\n            messages[3],\n            ['paintrect', 288, 288, 384, 304]\n        );\n\n        assert.deepEqual(\n            messages[4],\n            ['paintrect', 0, 268.8, 96, 288]\n        );\n\n        assert.deepEqual(\n            messages[5],\n            ['paintrect', 96, 230.4, 192, 249.6]\n        );\n        // TODO: linesegment 240 312 288 201.6 255 0 0, linesegment 336 296 288 201.6 255 0 0\n        // (384 - (384 - 192)/2), (211.2 - (211.2 - 192)/2)\n        // 288, 201.6\n        assert.deepEqual(\n            messages[6],\n            ['paintrect', 192, 192, 384, 211.2]\n        );\n\n        //\n        assert.deepEqual(\n            messages[7],\n            ['paintrect', 0, 172.8, 192, 192]\n        );\n\n        assert.deepEqual(\n            messages[8],\n            ['paintrect', 192, 96, 384, 115.2]\n        );\n\n        //\n        assert.deepEqual(\n            messages[9],\n            ['paintrect', 0, 0, 384, 96]\n        );\n\n    }));\n\n    it(\"calculates rendering messages of a single clip correctly\", test(()=>{\n\n        let stubLiveAPI = {\n            get: () => {return 0},\n            set: () => {},\n            call: () => {}\n        };\n\n        let stub_clip_dao = new c.ClipDao(\n            stubLiveAPI,\n            new m.Messenger('node', 0),\n            false\n        );\n\n        sinon.stub(stub_clip_dao, \"get_start_marker\").callsFake(() => {\n            return 0;\n        });\n        sinon.stub(stub_clip_dao, \"get_end_marker\").callsFake(() => {\n            return 4;\n        });\n        sinon.stub(stub_clip_dao, \"get_notes\").callsFake(() => {\n            return [\"notes\",4,\"note\",50,0,1,127,0,\"note\",52,1,1,127,0,\"note\",54,2,1,127,0,\"note\",55,3,1,127,0,\"done\"]\n        });\n\n        var clip = new c.Clip(stub_clip_dao);\n\n        clip.load_notes();\n\n        var dim = 16 * 6 * 4;\n\n        var pwindow = new w.Pwindow(\n            dim,\n            dim,\n            new m.Messenger('node', 0)\n        );\n\n        pwindow.add_clip(clip);\n\n        let messages = pwindow.get_messages_render_clips();\n\n        assert.deepEqual(\n            messages[0],\n            ['paintrect', 0, 320, 96, 384]\n        );\n\n        assert.deepEqual(\n            messages[1],\n            ['paintrect', 96, 192, 192, 256]\n        );\n\n        assert.deepEqual(\n            messages[2],\n            ['paintrect', 192, 64, 288, 128]\n        );\n\n        assert.deepEqual(\n            messages[3],\n            ['paintrect', 288, 0, 384, 64]\n        );\n    }));\n\n}));"]}