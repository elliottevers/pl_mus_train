{"version":3,"file":"parse.js","sourceRoot":"","sources":["parse.ts"],"names":[],"mappings":";;AAAA,4CAA8C;AAC9C,sCAAyC;AACzC,2DAAwD;AACxD,IAAO,gBAAgB,GAAG,uBAAU,CAAC,gBAAgB,CAAC;AACtD,yDAAoD;AACpD,IAAO,SAAS,GAAG,mBAAO,CAAC,SAAS,CAAC;AACrC,4CAAyC;AACzC,IAAO,eAAe,GAAG,WAAI,CAAC,eAAe,CAAC;AAC9C,4CAAyC;AACzC,IAAO,IAAI,GAAG,WAAI,CAAC,IAAI,CAAC;AACxB,uDAAoD;AACpD,kDAA+C;AAC/C,IAAO,YAAY,GAAG,eAAM,CAAC,YAAY,CAAC;AAC1C,mDAAgD;AAChD,IAAO,OAAO,GAAG,iBAAO,CAAC,OAAO,CAAC;AACjC,2DAA2E;AAC3E,IAAO,KAAK,GAAG,yBAAa,CAAC,KAAK,CAAC;AACnC,IAAO,KAAK,GAAG,qBAAS,CAAC,KAAK,CAAC;AAC/B,IAAO,SAAS,GAAG,yBAAa,CAAC,SAAS,CAAC;AAC3C,+CAA4C;AAC5C,IAAO,eAAe,GAAG,aAAK,CAAC,eAAe,CAAC;AAC/C,IAAO,KAAK,GAAG,aAAK,CAAC,KAAK,CAAC;AAC3B,4CAAyC;AACzC,IAAO,cAAc,GAAG,WAAI,CAAC,cAAc,CAAC;AAC5C,+CAA4D;AAC5D,IAAO,KAAK,GAAG,aAAY,CAAC,KAAK,CAAC;AAClC,IAAO,IAAI,GAAG,WAAI,CAAC,IAAI,CAAC;AACxB,IAAO,eAAe,GAAG,aAAY,CAAC,eAAe,CAAC;AACtD,qDAAkD;AAClD,IAAO,OAAO,GAAG,iBAAO,CAAC,OAAO,CAAC;AACjC,qDAAkD;AAClD,IAAO,YAAY,GAAG,eAAM,CAAC,YAAY,CAAC;AAC1C,iDAA8C;AAC9C,IAAO,WAAW,GAAG,WAAI,CAAC,WAAW,CAAC;AACtC,IAAM,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AAGhC,IAAI,IAAI,GAAc,IAAI,SAAS,EAAE,CAAC;AAEtC,IAAI,oBAAoB,GAAG,IAAI,CAAC,KAAK,CACjC;IACI,EAAE,EAAE,CAAC,CAAC;IACN,IAAI,EAAE,IAAI,WAAC,CAAC,IAAI,CACZ,EAAE,EACF,CAAC,EACD,CAAC,EACD,EAAE,EACF,CAAC,CACJ;IACD,QAAQ,EAAE,EAET;CACJ,CACJ,CAAC;AAEF,IAAI,oBAAoB,GAAG,IAAI,CAAC,KAAK,CACjC;IACI,EAAE,EAAE,CAAC,CAAC;IACN,IAAI,EAAE,IAAI,WAAC,CAAC,IAAI,CACZ,EAAE,EACF,CAAC,EACD,CAAC,EACD,EAAE,EACF,CAAC,CACJ;IACD,QAAQ,EAAE,EAET;CACJ,CACJ,CAAC;AAGF,IAAI,aAAa,GAAG,IAAI,CAAC,KAAK,CAC1B;IACI,EAAE,EAAE,CAAC,CAAC;IACN,IAAI,EAAE,IAAI,WAAC,CAAC,IAAI,CACZ,EAAE,EACF,CAAC,EACD,CAAC,EACD,EAAE,EACF,CAAC,CACJ;IACD,QAAQ,EAAE,EAET;CACJ,CACJ,CAAC;AAEF,IAAI,aAAa,GAAG,IAAI,CAAC,KAAK,CAC1B;IACI,EAAE,EAAE,CAAC,CAAC;IACN,IAAI,EAAE,IAAI,WAAC,CAAC,IAAI,CACZ,EAAE,EACF,CAAC,EACD,CAAC,EACD,EAAE,EACF,CAAC,CACJ;IACD,QAAQ,EAAE,EAET;CACJ,CACJ,CAAC;AAIF,IAAI,aAAa,GAAG,IAAI,CAAC,KAAK,CAC1B;IACI,EAAE,EAAE,CAAC,CAAC;IACN,IAAI,EAAE,IAAI,WAAC,CAAC,IAAI,CACZ,EAAE,EACF,CAAC,EACD,CAAC,EACD,EAAE,EACF,CAAC,CACJ;IACD,QAAQ,EAAE,EAET;CACJ,CACJ,CAAC;AAEF,IAAI,aAAa,GAAG,IAAI,CAAC,KAAK,CAC1B;IACI,EAAE,EAAE,CAAC,CAAC;IACN,IAAI,EAAE,IAAI,WAAC,CAAC,IAAI,CACZ,EAAE,EACF,CAAC,EACD,CAAC,EACD,EAAE,EACF,CAAC,CACJ;IACD,QAAQ,EAAE,EAET;CACJ,CACJ,CAAC;AAGF,IAAI,aAAa,GAAG,IAAI,CAAC,KAAK,CAC1B;IACI,EAAE,EAAE,CAAC,CAAC;IACN,IAAI,EAAE,IAAI,WAAC,CAAC,IAAI,CACZ,EAAE,EACF,CAAC,EACD,CAAC,EACD,EAAE,EACF,CAAC,CACJ;IACD,QAAQ,EAAE,EAET;CACJ,CACJ,CAAC;AAEF,IAAI,aAAa,GAAG,IAAI,CAAC,KAAK,CAC1B;IACI,EAAE,EAAE,CAAC,CAAC;IACN,IAAI,EAAE,IAAI,WAAC,CAAC,IAAI,CACZ,EAAE,EACF,CAAC,EACD,CAAC,EACD,EAAE,EACF,CAAC,CACJ;IACD,QAAQ,EAAE,EAET;CACJ,CACJ,CAAC;AAIF,IAAI,aAAa,GAAG,IAAI,CAAC,KAAK,CAC1B;IACI,EAAE,EAAE,CAAC,CAAC;IACN,IAAI,EAAE,IAAI,WAAC,CAAC,IAAI,CACZ,EAAE,EACF,CAAC,EACD,CAAC,EACD,EAAE,EACF,CAAC,CACJ;IACD,QAAQ,EAAE,EAET;CACJ,CACJ,CAAC;AAEF,IAAI,aAAa,GAAG,IAAI,CAAC,KAAK,CAC1B;IACI,EAAE,EAAE,CAAC,CAAC;IACN,IAAI,EAAE,IAAI,WAAC,CAAC,IAAI,CACZ,EAAE,EACF,CAAC,EACD,CAAC,EACD,EAAE,EACF,CAAC,CACJ;IACD,QAAQ,EAAE,EAET;CACJ,CACJ,CAAC;AAIF,IAAI,oBAAoB,GAAG,IAAI,CAAC,KAAK,CACjC;IACI,EAAE,EAAE,CAAC,CAAC;IACN,IAAI,EAAE,IAAI,WAAC,CAAC,IAAI,CACZ,EAAE,EACF,CAAC,EACD,CAAC,EACD,EAAE,EACF,CAAC,CACJ;IACD,QAAQ,EAAE,EAET;CACJ,CACJ,CAAC;AAEF,IAAI,oBAAoB,GAAG,IAAI,CAAC,KAAK,CACjC;IACI,EAAE,EAAE,CAAC,CAAC;IACN,IAAI,EAAE,IAAI,WAAC,CAAC,IAAI,CACZ,EAAE,EACF,CAAC,EACD,CAAC,EACD,EAAE,EACF,CAAC,CACJ;IACD,QAAQ,EAAE,EAET;CACJ,CACJ,CAAC;AAIF,IAAI,oBAAoB,GAAG,IAAI,CAAC,KAAK,CACjC;IACI,EAAE,EAAE,CAAC,CAAC;IACN,IAAI,EAAE,IAAI,WAAC,CAAC,IAAI,CACZ,EAAE,EACF,CAAC,EACD,CAAC,EACD,EAAE,EACF,CAAC,CACJ;IACD,QAAQ,EAAE,EAET;CACJ,CACJ,CAAC;AAEF,IAAI,oBAAoB,GAAG,IAAI,CAAC,KAAK,CACjC;IACI,EAAE,EAAE,CAAC,CAAC;IACN,IAAI,EAAE,IAAI,WAAC,CAAC,IAAI,CACZ,EAAE,EACF,CAAC,EACD,CAAC,EACD,EAAE,EACF,CAAC,CACJ;IACD,QAAQ,EAAE,EAET;CACJ,CACJ,CAAC;AAIF,IAAI,wBAAwB,GAAG,IAAI,CAAC,KAAK,CACrC;IACI,EAAE,EAAE,CAAC,CAAC;IACN,IAAI,EAAE,IAAI,WAAC,CAAC,IAAI,CACZ,EAAE,EACF,CAAC,EACD,CAAC,EACD,EAAE,EACF,CAAC,CACJ;IACD,QAAQ,EAAE,EAET;CACJ,CACJ,CAAC;AAEF,IAAI,wBAAwB,GAAG,IAAI,CAAC,KAAK,CACrC;IACI,EAAE,EAAE,CAAC,CAAC;IACN,IAAI,EAAE,IAAI,WAAC,CAAC,IAAI,CACZ,EAAE,EACF,CAAC,EACD,CAAC,EACD,EAAE,EACF,CAAC,CACJ;IACD,QAAQ,EAAE,EAET;CACJ,CACJ,CAAC;AAEF,mEAAmE;AACnE,IAAI,oBAAoB,GAAG,IAAI,CAAC,KAAK,CACjC;IACI,EAAE,EAAE,CAAC,CAAC;IACN,IAAI,EAAE,IAAI,WAAC,CAAC,IAAI,CACZ,EAAE,EACF,CAAC,EACD,CAAC,EACD,EAAE,EACF,CAAC,CACJ;IACD,QAAQ,EAAE,EAET;CACJ,CACJ,CAAC;AAGF,IAAI,kBAAkB,GAAG,SAAS,CAAC;AAEnC,IAAI,kBAAkB,GAAG,KAAK,CAAC;AAE/B,IAAI,wBAAwB,GAAG,IAAI,gBAAgB,CAC/C,kBAAkB,EAClB,kBAAkB,CACrB,CAAC;AAEF,IAAI,SAAS,GAAW,cAAc,CAAC;AACvC,sBAAsB;AAGtB,IAAI,eAAe,GAAG,IAAI,SAAS,CAAC,SAAS,EAAE,CAAC,EAAE,cAAc,CAAC,CAAC;AAElE,IAAI,qBAAqB,GAAG,IAAI,KAAK,EAEpC,CAAC;AAEF,qBAAqB,CAAC,SAAS,CAC3B,CAAC,CACJ,CAAC;AAEF,IAAI,kBAAkB,GAAG,IAAI,YAAY,CACrC,GAAG,EACH,GAAG,EACH,eAAe,CAClB,CAAC;AAGF,IAAI,KAAK,EAAE,MAAM,CAAC;AAElB,MAAM,GAAG,EAAE,CAAC;AAEZ,KAAK,GAAG,IAAI,KAAK,CACb,IAAI,eAAe,EAElB,CACJ,CAAC;AAEF,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAEnB,KAAK,GAAG,IAAI,KAAK,CACb,IAAI,eAAe,EAElB,CACJ,CAAC;AAEF,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAEnB,IAAI,UAAU,GAAG,IAAI,IAAI,CACrB,IAAI,cAAc,CACd,MAAM,CACT,CACJ,CAAC;AAEF,0BAA0B;AAG1B,qCAAqC;AAErC,IAAI,gBAAgB,EAAE,eAAe,CAAC;AAEtC,IAAI,gBAAgB,GAAG,EAAE,CAAC;AAG1B,gBAAgB,GAAG,IAAI,eAAe,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC;AAE/D,gBAAgB,CAAC,UAAU,GAAG,CAAC,CAAC;AAEhC,gBAAgB,CAAC,QAAQ,GAAG,CAAC,CAAC;AAE9B,eAAe,GAAG,IAAI,IAAI,CACtB,gBAAgB,CACnB,CAAC;AAEF,gBAAgB,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;AAIvC,gBAAgB,GAAG,IAAI,eAAe,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC;AAE/D,gBAAgB,CAAC,UAAU,GAAG,CAAC,CAAC;AAEhC,gBAAgB,CAAC,QAAQ,GAAG,CAAC,CAAC;AAE9B,eAAe,GAAG,IAAI,IAAI,CACtB,gBAAgB,CACnB,CAAC;AAEF,gBAAgB,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;AAIvC,IAAI,gBAAgB,GAAG,IAAI,KAAK,CAC5B,IAAI,eAAe,CACf,gBAAgB,CACnB,CACJ,CAAC;AAEF,cAAc;AAEd,IAAI,YAAY,GAAG,EAAE,CAAC;AAEtB,IAAI,WAAW,CAAC;AAEhB,gBAAgB,GAAG,IAAI,eAAe,CAClC;IACI,aAAa;IACb,aAAa;IACb,aAAa;IACb,aAAa;CAChB,CACJ,CAAC;AAEF,gBAAgB,CAAC,UAAU,GAAG,CAAC,CAAC;AAEhC,gBAAgB,CAAC,QAAQ,GAAG,CAAC,CAAC;AAE9B,WAAW,GAAG,IAAI,IAAI,CAClB,gBAAgB,CACnB,CAAC;AAEF,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAI/B,gBAAgB,GAAG,IAAI,eAAe,CAClC;IACI,aAAa;IACb,aAAa;IACb,aAAa;IACb,aAAa;CAChB,CACJ,CAAC;AAEF,gBAAgB,CAAC,UAAU,GAAG,CAAC,CAAC;AAEhC,gBAAgB,CAAC,QAAQ,GAAG,CAAC,CAAC;AAE9B,WAAW,GAAG,IAAI,IAAI,CAClB,gBAAgB,CACnB,CAAC;AAEF,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAG/B,IAAI,YAAY,GAAG,IAAI,KAAK,CACxB,IAAI,eAAe,CACf,YAAY,CACf,CACJ,CAAC;AAIF,YAAY,CAAC,UAAU,EAAE,CAAC;AAE1B,gBAAgB,CAAC,UAAU,EAAE,CAAC;AAE9B,IAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAC7B,gBAAgB,CAAC,SAAS,EAAE,CAC/B,CAAC;AAEF,4BAA4B;AAC5B,KAAK,IAAI,SAAS,IAAI,QAAQ,EAAE;IAC5B,IAAI,SAAO,GAAG,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC;IAE1C,SAAO,CAAC,SAAS,CACb,IAAI,KAAK,CACL,IAAI,eAAe,EAAE,CACxB,CACJ,CAAC;IAEF,SAAO,CAAC,mBAAmB,CACvB,gBAAgB,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CACtC,CAAA;CACJ;AAED,IAAI,mBAAmB,GAAG,IAAI,OAAO,CACjC,kBAAkB,EAClB,wBAAwB,EACxB,qBAAqB,EACrB,YAAY,EACZ,gBAAgB,EAChB,UAAU,EACV,QAAQ,EACR,eAAe,CAClB,CAAC;AAEF,0CAA0C;AAE1C,mBAAmB,CAAC,QAAQ,EAE3B,CAAC;AAEF,mBAAmB,CAAC,YAAY,CAC5B,CAAC,oBAAoB,EAAE,oBAAoB,CAAC,CAC/C,CAAC;AAEF,mBAAmB,CAAC,YAAY,CAC5B,CAAC,oBAAoB,EAAE,oBAAoB,CAAC,CAC/C,CAAC;AAEF,mBAAmB,CAAC,aAAa,EAEhC,CAAC;AAGF,mBAAmB,CAAC,YAAY,EAE/B,CAAC;AAEF,YAAY,CAAC,MAAM,CACf,mBAAmB,EACnB,sGAAsG,EACtG,SAAS,CACZ,CAAC;AAEF,6CAA6C;AAC7C,mBAAmB,GAAG,IAAI,OAAO,CAC7B,kBAAkB,EAClB,wBAAwB,EACxB,qBAAqB,EACrB,YAAY,EACZ,gBAAgB,EAChB,UAAU,EACV,QAAQ,EACR,eAAe,EACf,IAAI,CACP,CAAC;AAEF,IAAI,mBAAmB,GAAG,WAAW,CAAC,iBAAiB,CACnD,sGAAsG,EACtG,SAAS,CACZ,CAAC;AAEF,mBAAmB,CAAC,QAAQ,EAAE,CAAC;AAE/B,kCAAkC;AAElC,IAAI,UAAU,GAAG,IAAI,CAAC;AAEtB,OAAO,UAAU,EAAE;IACf,IAAI,aAAa,GAAG,mBAAmB,CAAC,qBAAqB,CAAC,iBAAiB,EAAE,CAAC;IAElF,IAAI,wBAAwB,GAAG,qBAAqB,CAAC,iCAAiC,CAAC,aAAa,CAAC,CAAC;IAEtG,IAAI,mBAAmB,CAAC,qBAAqB,CAAC,IAAI,IAAI,mBAAmB,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;QAE9I,qBAAqB,CAAC,SAAS,CAAC,mBAAmB,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC;QAE5E,qBAAqB,CAAC,KAAK,CAAC,UAAU,EAAE,mBAAmB,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;QAEnF,UAAU,GAAG,KAAK,CAAC;QAEnB,SAAS;KACZ;IAED,mBAAmB,CAAC,YAAY,CAC5B,mBAAmB,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC,CAChF,CAAC;CACL;AAGD,mBAAmB,CAAC,WAAW,GAAG,KAAK,CAAC;AAExC,mBAAmB,CAAC,aAAa,EAAE,CAAC","sourcesContent":["import {note as n} from \"../../src/note/note\";\nimport TreeModel = require(\"tree-model\");\nimport {user_input} from \"../../src/control/user_input\";\nimport UserInputHandler = user_input.UserInputHandler;\nimport {message} from \"../../src/message/messenger\";\nimport Messenger = message.Messenger;\nimport {live} from \"../../src/live/live\";\nimport LiveClipVirtual = live.LiveClipVirtual;\nimport {clip} from \"../../src/clip/clip\";\nimport Clip = clip.Clip;\nimport {algorithm} from \"../../src/train/algorithm\";\nimport {window} from \"../../src/render/window\";\nimport MatrixWindow = window.MatrixWindow;\nimport {trainer} from \"../../src/train/trainer\";\nimport Trainer = trainer.Trainer;\nimport {modes_control, modes_texture} from \"../../src/constants/constants\";\nimport VOCAL = modes_control.VOCAL;\nimport Parse = algorithm.Parse;\nimport MONOPHONY = modes_texture.MONOPHONY;\nimport {track} from \"../../src/track/track\";\nimport TrackDaoVirtual = track.TrackDaoVirtual;\nimport Track = track.Track;\nimport {song} from \"../../src/song/song\";\nimport SongDaoVirtual = song.SongDaoVirtual;\nimport {scene as module_scene} from \"../../src/scene/scene\";\nimport Scene = module_scene.Scene;\nimport Song = song.Song;\nimport SceneDaoVirtual = module_scene.SceneDaoVirtual;\nimport {segment} from \"../../src/segment/segment\";\nimport Segment = segment.Segment;\nimport {freeze} from \"../../src/serialize/freeze\";\nimport TrainFreezer = freeze.TrainFreezer;\nimport {thaw} from \"../../src/serialize/thaw\";\nimport TrainThawer = thaw.TrainThawer;\nconst _ = require('underscore');\n\n\nlet tree: TreeModel = new TreeModel();\n\nlet segment_note_1_parse = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            51,\n            0,\n            4,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\nlet segment_note_2_parse = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            51,\n            4,\n            4,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\n\nlet note_melody_1 = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            51,\n            0,\n            1,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\nlet note_melody_2 = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            53,\n            1,\n            1,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\n\n\nlet note_melody_3 = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            55,\n            2,\n            1,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\nlet note_melody_4 = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            56,\n            3,\n            1,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\n\nlet note_melody_5 = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            51,\n            4,\n            1,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\nlet note_melody_6 = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            53,\n            5,\n            1,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\n\n\nlet note_melody_7 = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            55,\n            6,\n            1,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\nlet note_melody_8 = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            56,\n            7,\n            1,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\n\n\nlet note_melody_parsed_1 = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            51,\n            0,\n            2,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\nlet note_melody_parsed_2 = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            53,\n            2,\n            2,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\n\n\nlet note_melody_parsed_3 = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            55,\n            4,\n            2,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\nlet note_melody_parsed_4 = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            56,\n            6,\n            2,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\n\n\nlet note_summarized_melody_1 = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            51,\n            0,\n            4,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\nlet note_summarized_melody_2 = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            55,\n            4,\n            4,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\n// TODO: shouldn't this be automatically determined by the trainer?\nlet note_summarized_root = tree.parse(\n    {\n        id: -1, // TODO: hashing scheme for clip id and beat start\n        note: new n.Note(\n            51,\n            1,\n            8,\n            90,\n            0\n        ),\n        children: [\n\n        ]\n    }\n);\n\n\nlet mode_texture_parse = MONOPHONY;\n\nlet mode_control_parse = VOCAL;\n\nlet user_input_handler_parse = new UserInputHandler(\n    mode_texture_parse,\n    mode_control_parse\n);\n\nlet env_parse: string = 'node_for_max';\n// env_parse = 'node';\n\n\nlet messenger_parse = new Messenger(env_parse, 0, 'render_parse');\n\nlet algorithm_train_parse = new Parse(\n\n);\n\nalgorithm_train_parse.set_depth(\n    3\n);\n\nlet window_local_parse = new MatrixWindow(\n    384,\n    384,\n    messenger_parse\n);\n\n\nlet scene, scenes;\n\nscenes = [];\n\nscene = new Scene(\n    new SceneDaoVirtual(\n\n    )\n);\n\nscenes.push(scene);\n\nscene = new Scene(\n    new SceneDaoVirtual(\n\n    )\n);\n\nscenes.push(scene);\n\nlet song_parse = new Song(\n    new SongDaoVirtual(\n        scenes\n    )\n);\n\n// let num_clip_slots = 2;\n\n\n// USER INPUT CLIP - HAS THE SEGMENTS\n\nlet clip_dao_virtual, clip_user_input;\n\nlet clips_user_input = [];\n\n\nclip_dao_virtual = new LiveClipVirtual([segment_note_1_parse]);\n\nclip_dao_virtual.beat_start = 0;\n\nclip_dao_virtual.beat_end = 4;\n\nclip_user_input = new Clip(\n    clip_dao_virtual\n);\n\nclips_user_input.push(clip_user_input);\n\n\n\nclip_dao_virtual = new LiveClipVirtual([segment_note_2_parse]);\n\nclip_dao_virtual.beat_start = 4;\n\nclip_dao_virtual.beat_end = 8;\n\nclip_user_input = new Clip(\n    clip_dao_virtual\n);\n\nclips_user_input.push(clip_user_input);\n\n\n\nlet track_user_input = new Track(\n    new TrackDaoVirtual(\n        clips_user_input\n    )\n);\n\n// TARGET CLIP\n\nlet clips_target = [];\n\nlet clip_target;\n\nclip_dao_virtual = new LiveClipVirtual(\n    [\n        note_melody_1,\n        note_melody_2,\n        note_melody_3,\n        note_melody_4\n    ]\n);\n\nclip_dao_virtual.beat_start = 0;\n\nclip_dao_virtual.beat_end = 4;\n\nclip_target = new Clip(\n    clip_dao_virtual\n);\n\nclips_target.push(clip_target);\n\n\n\nclip_dao_virtual = new LiveClipVirtual(\n    [\n        note_melody_5,\n        note_melody_6,\n        note_melody_7,\n        note_melody_8\n    ]\n);\n\nclip_dao_virtual.beat_start = 4;\n\nclip_dao_virtual.beat_end = 8;\n\nclip_target = new Clip(\n    clip_dao_virtual\n);\n\nclips_target.push(clip_target);\n\n\nlet track_target = new Track(\n    new TrackDaoVirtual(\n        clips_target\n    )\n);\n\n\n\ntrack_target.load_clips();\n\ntrack_user_input.load_clips();\n\nlet segments = Segment.from_notes(\n    track_user_input.get_notes()\n);\n\n// assign scenes to segments\nfor (let i_segment in segments) {\n    let segment = segments[Number(i_segment)];\n\n    segment.set_scene(\n        new Scene(\n            new SceneDaoVirtual()\n        )\n    );\n\n    segment.set_clip_user_input(\n        clips_user_input[Number(i_segment)]\n    )\n}\n\nlet trainer_local_parse = new Trainer(\n    window_local_parse,\n    user_input_handler_parse,\n    algorithm_train_parse,\n    track_target,\n    track_user_input,\n    song_parse,\n    segments,\n    messenger_parse\n);\n\n// test case - 2 segments, 2 notes a piece\n\ntrainer_local_parse.commence(\n\n);\n\ntrainer_local_parse.accept_input(\n    [note_melody_parsed_1, note_melody_parsed_2]\n);\n\ntrainer_local_parse.accept_input(\n    [note_melody_parsed_3, note_melody_parsed_4]\n);\n\ntrainer_local_parse.render_window(\n\n);\n\n\ntrainer_local_parse.clear_window(\n\n);\n\nTrainFreezer.freeze(\n    trainer_local_parse,\n    '/Users/elliottevers/Documents/DocumentsSymlinked/git-repos.nosync/tk_music_ts/cache/train_parse.json',\n    env_parse\n);\n\n// TODO: batch up the notes into the segments\ntrainer_local_parse = new Trainer(\n    window_local_parse,\n    user_input_handler_parse,\n    algorithm_train_parse,\n    track_target,\n    track_user_input,\n    song_parse,\n    segments,\n    messenger_parse,\n    true\n);\n\nlet matrix_deserialized = TrainThawer.thaw_notes_matrix(\n    '/Users/elliottevers/Documents/DocumentsSymlinked/git-repos.nosync/tk_music_ts/cache/train_parse.json',\n    env_parse\n);\n\ntrainer_local_parse.commence();\n\n// skip over the layer of segments\n\nlet input_left = true;\n\nwhile (input_left) {\n    let coord_current = trainer_local_parse.iterator_matrix_train.get_coord_current();\n\n    let coord_user_input_history = algorithm_train_parse.coord_to_index_history_user_input(coord_current);\n\n    if (trainer_local_parse.iterator_matrix_train.done || matrix_deserialized[coord_user_input_history[0]][coord_user_input_history[1]].length === 0) {\n\n        algorithm_train_parse.terminate(trainer_local_parse.struct_train, segments);\n\n        algorithm_train_parse.pause(song_parse, trainer_local_parse.segment_current.scene);\n\n        input_left = false;\n\n        continue;\n    }\n\n    trainer_local_parse.accept_input(\n        matrix_deserialized[coord_user_input_history[0]][coord_user_input_history[1]]\n    );\n}\n\n\ntrainer_local_parse.virtualized = false;\n\ntrainer_local_parse.render_window();"]}